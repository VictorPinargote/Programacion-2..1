<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <!-- Action para Configuraci√≥n -->
    <record model="ir.actions.act_window" id="biblioteca_configuracion_action_window">
      <field name="name">Configuraci√≥n de Multas</field>
      <field name="res_model">biblioteca.configuracion</field>
      <field name="view_mode">form</field>
      <field name="target">inline</field>
    </record>

    <!-- Vista de formulario para Configuraci√≥n -->
    <record model="ir.ui.view" id="biblioteca_configuracion_form">
      <field name="name">biblioteca.configuracion.form</field>
      <field name="model">biblioteca.configuracion</field>
      <field name="arch" type="xml">
        <form string="Configuraci√≥n del Sistema de Multas">
          <sheet>
            
            <!-- Banner informativo -->
            <div class="alert alert-info" role="alert" style="margin-bottom: 20px;">
              <h4 class="alert-heading">
                <i class="fa fa-info-circle"/> Configuraci√≥n Global del Sistema
              </h4>
              <p style="margin-bottom: 0;">
                Estos par√°metros controlan el funcionamiento autom√°tico del sistema de pr√©stamos y multas.
                Los cambios se aplicar√°n inmediatamente a todos los pr√©stamos nuevos.
              </p>
            </div>

            <group>
              <group string="‚è∞ Par√°metros de Pr√©stamos">
                <field name="name" readonly="1"/>
                
                <label for="dias_prestamo" string="D√≠as de Pr√©stamo"/>
                <div>
                  <field name="dias_prestamo" class="oe_inline" style="width: 80px;"/>
                  <span class="oe_inline" style="margin-left: 10px;">d√≠as</span>
                </div>
                <div class="alert alert-warning" role="alert" style="margin: 10px 0;">
                  <small>
                    <i class="fa fa-calendar"/> Tiempo m√°ximo que un usuario puede tener un libro prestado.
                    <br/>Ejemplo: Si configura 2 d√≠as, un pr√©stamo del lunes vence el mi√©rcoles.
                  </small>
                </div>
              </group>

              <group string="üí∞ Par√°metros de Multas">
                <label for="monto_multa_dia" string="Tarifa Diaria"/>
                <div>
                  <field name="monto_multa_dia" class="oe_inline" style="width: 80px;"/>
                  <span class="oe_inline" style="margin-left: 10px;">USD por d√≠a</span>
                </div>
                <div class="alert alert-success" role="alert" style="margin: 10px 0;">
                  <small>
                    <i class="fa fa-dollar"/> Monto que se cobra por cada d√≠a de retraso.
                    <br/>Ejemplo: $1.00 x 5 d√≠as de retraso = $5.00 de multa
                  </small>
                </div>
              </group>
            </group>

            <group>
              <group string="üìß Notificaciones Autom√°ticas">
                <label for="dias_gracia_notificacion" string="D√≠as de Gracia"/>
                <div>
                  <field name="dias_gracia_notificacion" class="oe_inline" style="width: 80px;"/>
                  <span class="oe_inline" style="margin-left: 10px;">d√≠as despu√©s del vencimiento</span>
                </div>
                <div class="alert alert-primary" role="alert" style="margin: 10px 0;">
                  <small>
                    <i class="fa fa-envelope"/> D√≠as de espera antes de enviar el correo de multa.
                    <br/><strong>Ejemplo con 1 d√≠a de gracia:</strong>
                    <br/>‚Ä¢ Pr√©stamo vence: Mi√©rcoles 23:59
                    <br/>‚Ä¢ D√≠a de gracia: Jueves (no se env√≠a correo)
                    <br/>‚Ä¢ Env√≠o de correo: Viernes autom√°ticamente
                  </small>
                </div>
              </group>

              <group string="üì¨ Informaci√≥n de Contacto">
                <field name="email_biblioteca" placeholder="biblioteca@ejemplo.com"/>
                <div class="alert alert-info" role="alert" style="margin: 10px 0;">
                  <small>
                    <i class="fa fa-at"/> Email desde el cual se enviar√°n las notificaciones.
                    <br/>Aseg√∫rese de configurar correctamente el servidor de correo en Odoo.
                  </small>
                </div>
              </group>
            </group>

            <!-- Secci√≥n de ayuda -->
            <group string="ü§ñ Funcionamiento del Sistema Autom√°tico" col="1">
              <div class="alert alert-dark" role="alert">
                <h5><i class="fa fa-cogs"/> ¬øC√≥mo funciona el sistema autom√°tico?</h5>
                <ol style="line-height: 2; margin-bottom: 0;">
                  <li>
                    <strong>Ejecuci√≥n diaria:</strong> El sistema verifica pr√©stamos vencidos todos los d√≠as a las 8:00 AM
                  </li>
                  <li>
                    <strong>Identificaci√≥n:</strong> Detecta pr√©stamos que superaron la fecha m√°xima + d√≠as de gracia
                  </li>
                  <li>
                    <strong>Generaci√≥n de multas:</strong> Calcula autom√°ticamente el monto seg√∫n d√≠as de retraso
                  </li>
                  <li>
                    <strong>Env√≠o de correos:</strong> Notifica al lector con todos los detalles de la multa
                  </li>
                  <li>
                    <strong>Actualizaci√≥n de estado:</strong> Cambia el pr√©stamo a estado "Multa"
                  </li>
                </ol>
              </div>
            </group>

            <!-- Ejemplo pr√°ctico -->
            <group string="üìä Ejemplo Pr√°ctico" col="1">
              <div class="alert alert-success" role="alert">
                <h5><i class="fa fa-calculator"/> C√°lculo de Multa</h5>
                <p><strong>Configuraci√≥n actual:</strong></p>
                <ul style="line-height: 1.8;">
                  <li>D√≠as de pr√©stamo: <field name="dias_prestamo" readonly="1" class="oe_inline"/> d√≠as</li>
                  <li>D√≠as de gracia: <field name="dias_gracia_notificacion" readonly="1" class="oe_inline"/> d√≠a(s)</li>
                  <li>Tarifa diaria: $<field name="monto_multa_dia" readonly="1" class="oe_inline"/> USD</li>
                </ul>
                <p><strong>Escenario:</strong></p>
                <ul style="line-height: 1.8; margin-bottom: 0;">
                  <li>Pr√©stamo realizado: Lunes 1 de enero, 10:00 AM</li>
                  <li>Fecha m√°xima: Mi√©rcoles 3 de enero, 10:00 AM</li>
                  <li>D√≠a de gracia: Jueves 4 de enero (sin multa a√∫n)</li>
                  <li>Viernes 5 de enero: Sistema env√≠a correo (1 d√≠a de retraso = $1.00)</li>
                  <li>Lunes 8 de enero: Usuario devuelve (4 d√≠as de retraso = $4.00)</li>
                </ul>
              </div>
            </group>

          </sheet>
        </form>
      </field>
    </record>

    <!-- Agregar en el men√∫ principal -->
    <menuitem 
      name="Configuraci√≥n" 
      id="biblioteca.menu_configuracion" 
      parent="biblioteca_menu" 
      action="biblioteca_configuracion_action_window" 
      sequence="100"
      groups="base.group_system"/>

  </data>
</odoo>